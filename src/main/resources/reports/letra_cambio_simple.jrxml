<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE jasperReport PUBLIC "-//JasperReports//DTD Report Design//EN" "http://jasperreports.sourceforge.net/dtds/jasperreport.dtd">

<jasperReport
    name="letra_cambio"
    pageWidth="396"
    pageHeight="612"
    columnWidth="396"
    leftMargin="0"
    rightMargin="0"
    topMargin="0"
    bottomMargin="0">

    <!-- ================== PARAMETROS ================== -->
    <parameter name="ciudad" class="java.lang.String" />
    <parameter name="monto" class="java.lang.String" />
    <parameter name="montoLetras" class="java.lang.String" />
    <parameter name="fechaEmision" class="java.lang.String" />
    <parameter name="fechaVencimiento" class="java.lang.String" />
    <parameter name="giradorNombre" class="java.lang.String" />
    <parameter name="giradorDocumento" class="java.lang.String" />
    <parameter name="giradoNombre" class="java.lang.String" />
    <parameter name="giradoDocumento" class="java.lang.String" />
    <parameter name="intereses" class="java.lang.String" />

    <parameter name="documentoId" class="java.lang.String" />
    <parameter name="fechaFirmaGirador" class="java.lang.String" />
    <parameter name="fechaFirmaGirado" class="java.lang.String" />
    <parameter name="metodoFirma" class="java.lang.String" />
    <parameter name="algoritmoHash" class="java.lang.String" />

    <!-- ================== TITULO ================== -->
    <title>
        <band height="60">
            <staticText>
                <reportElement x="0" y="15" width="396" height="30" />
                <textElement textAlignment="Center">
                    <font size="16" isBold="true" />
                </textElement>
                <text><![CDATA[LETRA DE CAMBIO]]></text>
            </staticText>
        </band>
    </title>

    <!-- ================== CUERPO ================== -->
    <detail>
        <band height="520">

            <!-- TEXTO VALOR -->
            <textField isStretchWithOverflow="true">
                <reportElement x="15" y="10" width="366" height="30" />
                <textElement textAlignment="Justified">
                    <font size="9" />
                </textElement>
                <textFieldExpression><![CDATA[
"Por valor de: $" + $P{monto} + " (" + $P{montoLetras} + ")"
                ]]></textFieldExpression>
            </textField>

            <!-- TEXTO PRINCIPAL -->
            <textField isStretchWithOverflow="true">
                <reportElement x="15" y="35" width="366" height="110" />
                <textElement textAlignment="Justified">
                    <font size="9" />
                </textElement>
                <textFieldExpression><![CDATA[
"En la ciudad de " + $P{ciudad} + ", el " + $P{fechaEmision} +
", sírvase usted pagar INCONDICIONALMENTE a la orden de " +
$P{giradorNombre} + " o a quien este indique, la suma de " +
$P{montoLetras} + " (" + $P{monto} + ")."
                ]]></textFieldExpression>
            </textField>

            <!-- VENCIMIENTO -->
            <textField>
                <reportElement x="15" y="80" width="366" height="25" />
                <textElement textAlignment="Justified">
                    <font size="9" />
                </textElement>
                <textFieldExpression><![CDATA[
"El pago deberá realizarse el día " + $P{fechaVencimiento} +
", en la ciudad de " + $P{ciudad} + "."
                ]]></textFieldExpression>
            </textField>


            <!-- INTERESES -->
            <textField>
                <reportElement x="15" y="110" width="366" height="45" />
                <textElement textAlignment="Justified">
                    <font size="9" />
                </textElement>
                <textFieldExpression><![CDATA[
                    ($P{intereses} != null && !$P{intereses}.trim().isEmpty())
                        ? "La presente letra causará intereses corrientes del " + $P{intereses} + "% mensual desde la fecha de su suscripción hasta su vencimiento. \nEn caso de mora, causará intereses moratorios a la tasa máxima legal permitida por la Superintendencia Financiera de Colombia."
                        : "La suma aquí ordenada NO causará intereses."
                ]]></textFieldExpression>
            </textField>

            <!-- ================== TABLA 2x2 ================== -->
            <frame>
                <reportElement x="10" y="200" width="376" height="170" />
                <box>
                    <pen lineWidth="0.8" />
                </box>

                <!-- GIRADO -->
                <frame>
                    <reportElement x="0" y="0" width="188" height="85" />
                    <box>
                        <pen lineWidth="0.5" />
                    </box>

                    <staticText>
                        <reportElement x="5" y="5" width="178" height="15" />
                        <textElement>
                            <font size="9" isBold="true" />
                        </textElement>
                        <text><![CDATA[Girado (Deudor)]]></text>
                    </staticText>

                    <textField>
                        <reportElement x="5" y="25" width="178" height="50" />
                        <textElement>
                            <font size="9" />
                        </textElement>
                        <textFieldExpression><![CDATA[
"Nombre: " + $P{giradoNombre} + "\n" +
"Cédula: " + $P{giradoDocumento}
                        ]]></textFieldExpression>
                    </textField>
                </frame>

                <!-- GIRADOR -->

                <frame>
                    <reportElement x="188" y="0" width="188" height="85" />
                    <box>
                        <pen lineWidth="0.5" />
                    </box>

                    <staticText>
                        <reportElement x="5" y="5" width="178" height="15" />
                        <textElement>
                            <font size="9" isBold="true" />
                        </textElement>
                        <text><![CDATA[Girador (Acreedor)]]></text>
                    </staticText>

                    <textField>
                        <reportElement x="5" y="25" width="178" height="50" />
                        <textElement>
                            <font size="9" />
                        </textElement>
                        <textFieldExpression><![CDATA[
"Nombre: " + $P{giradorNombre} + "\n" +
"Cédula: " + $P{giradorDocumento}
                        ]]></textFieldExpression>
                    </textField>
                </frame>

                <!-- FIRMA GIRADO -->
                <frame>
                    <reportElement x="0" y="85" width="188" height="85" />
                    <box>
                        <pen lineWidth="0.5" />
                    </box>

                    <staticText>
                        <reportElement x="5" y="10" width="178" height="60" />
                        <textElement>
                            <font size="9" />
                        </textElement>
                        <text><![CDATA[


Firma_____________________________
                        ]]></text>
                    </staticText>
                </frame>

                <!-- FIRMA GIRADOR -->
                <frame>
                    <reportElement x="188" y="85" width="188" height="85" />
                    <box>
                        <pen lineWidth="0.5" />
                    </box>

                    <staticText>
                        <reportElement x="5" y="25" width="178" height="40" />
                        <textElement>
                            <font size="9" />
                        </textElement>
                        <text><![CDATA[

Firma_____________________________
                        ]]></text>
                    </staticText>
                </frame>

            </frame>

        </band>
    </detail>

    <summary>
        <band height="600">

            <!-- TÍTULO -->
            <staticText>
                <reportElement x="0" y="20" width="396" height="30" />
                <textElement textAlignment="Center">
                    <font size="14" isBold="true" />
                </textElement>
                <text><![CDATA[CONSTANCIA DE FIRMAS ELECTRÓNICAS]]></text>
            </staticText>

            <!-- TEXTO INTRODUCTORIO -->
            <staticText>
                <reportElement x="20" y="70" width="356" height="60" />
                <textElement textAlignment="Justified">
                    <font size="9" />
                </textElement>
                <text><![CDATA[
El presente documento deja constancia de las firmas electrónicas
realizadas sobre la letra de cambio, de conformidad con la Ley 527
de 1999 y el Decreto 2364 de 2012.
            ]]></text>
            </staticText>

            <!-- DATOS DEL DOCUMENTO -->
            <textField>
                <reportElement x="20" y="140" width="356" height="70" />
                <textElement>
                    <font size="9" />
                </textElement>
                <textFieldExpression><![CDATA[
"ID del documento: " + $P{documentoId} + "\n" +
"Algoritmo de integridad: " + $P{algoritmoHash}
            ]]></textFieldExpression>
            </textField>

            <!-- FIRMA GIRADOR -->
            <textField>
                <reportElement x="20" y="230" width="356" height="60" />
                <textElement>
                    <font size="9" />
                </textElement>
                <textFieldExpression><![CDATA[
"Firmante: GIRADOR\n" +
"Fecha de firma: " + $P{fechaFirmaGirador} + "\n" +
"Método de firma: " + $P{metodoFirma}
            ]]></textFieldExpression>
            </textField>

            <!-- FIRMA GIRADO -->
            <textField>
                <reportElement x="20" y="310" width="356" height="60" />
                <textElement>
                    <font size="9" />
                </textElement>
                <textFieldExpression><![CDATA[
"Firmante: GIRADO\n" +
"Fecha de firma: " + $P{fechaFirmaGirado} + "\n" +
"Método de firma: " + $P{metodoFirma}
            ]]></textFieldExpression>
            </textField>

            <!-- CIERRE -->
            <staticText>
                <reportElement x="20" y="400" width="356" height="60" />
                <textElement textAlignment="Justified">
                    <font size="9" />
                </textElement>
                <text><![CDATA[
Este documento fue sellado electrónicamente por el sistema.
Cualquier alteración posterior invalida su integridad.
            ]]></text>
            </staticText>

        </band>
    </summary>


</jasperReport>